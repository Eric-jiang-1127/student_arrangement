{% extends "base.html" %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="fas fa-users"></i> 学生信息列表</h2>
  <a href="{{ url_for('add_student') }}" class="btn btn-success">
    <i class="fas fa-plus"></i> 添加学生
  </a>
</div>

<!-- 搜索框 -->
<div class="row mb-3">
  <div class="col-md-6">
    <form method="GET" action="{{ url_for('search') }}">
      <div class="input-group">
        <select class="form-select" name="type" style="max-width: 120px">
          <option value="name">姓名</option>
          <option value="no">学号</option>
        </select>
        <input
          type="text"
          class="form-control"
          name="query"
          placeholder="输入搜索内容"
          value="{{ search_query or '' }}"
        />
        <button class="btn btn-outline-primary" type="submit">
          <i class="fas fa-search"></i> 搜索
        </button>
      </div>
    </form>
  </div>
</div>

<!-- 学生列表 -->
{% if students %}
<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>学号</th>
        <th>姓名</th>
        <th>出生日期</th>
        <th>身份证</th>
        <th>语文</th>
        <th>数学</th>
        <th>英语</th>
        <th>平均分</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for student in students %}
      <tr>
        <td>{{ student.no }}</td>
        <td>{{ student.name }}</td>
        <td>
          {{ student.year }}-{{ "%02d"|format(student.month) }}-{{
          "%02d"|format(student.day) }}
        </td>
        <td>{{ student.id }}</td>
        <td>{{ "%.1f"|format(student.chinese) }}</td>
        <td>{{ "%.1f"|format(student.math) }}</td>
        <td>{{ "%.1f"|format(student.english) }}</td>
        <td>
          {{ "%.1f"|format((student.chinese + student.math + student.english) /
          3) }}
        </td>
        <td>
          <a
            href="{{ url_for('edit_student', student_no=student.no) }}"
            class="btn btn-sm btn-outline-primary"
          >
            <i class="fas fa-edit"></i>
          </a>
          <a
            href="{{ url_for('delete_student', student_no=student.no) }}"
            class="btn btn-sm btn-outline-danger"
            onclick="return confirm('确定要删除这个学生吗？')"
          >
            <i class="fas fa-trash"></i>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="mt-3">
  <p class="text-muted">
    <i class="fas fa-info-circle"></i>
    共 {{ students|length }} 条记录
  </p>
</div>
{% else %}
<div class="text-center mt-5">
  <i class="fas fa-users fa-3x text-muted mb-3"></i>
  <h4 class="text-muted">暂无学生信息</h4>
  <p class="text-muted">点击上方"添加学生"按钮开始添加学生信息</p>
</div>
{% endif %} {% endblock %}
